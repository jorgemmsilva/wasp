<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons"><title data-react-helmet="true">On-chain accounts | IOTA Smart Contract Protocol</title><meta data-react-helmet="true" property="og:url" content="https://iscp.docs.iota.org/docs/misc/accounts/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="On-chain accounts | IOTA Smart Contract Protocol"><meta data-react-helmet="true" name="description" content="ISCP introduces the concept of on-chain account. Each chain maintains a list"><meta data-react-helmet="true" property="og:description" content="ISCP introduces the concept of on-chain account. Each chain maintains a list"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://iscp.docs.iota.org/docs/misc/accounts/"><link data-react-helmet="true" rel="alternate" href="https://iscp.docs.iota.org/docs/misc/accounts/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://iscp.docs.iota.org/docs/misc/accounts/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a6ec2731.css">
<link rel="preload" href="/assets/js/runtime~main.44b953f2.js" as="script">
<link rel="preload" href="/assets/js/main.ab889f2b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ISCP</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/welcome/">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ISCP</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/welcome/">Documentation</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/guide/readme/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Core Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/smart-contracts/">Smart Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/iscp/">ISCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/iscp-architecture/">ISCP Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/validators/">Committees and Validators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/consensus/">Consensus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/states/">State, transitions and state anchoring</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Accounts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/accounts/accounts-how/">How accounts work</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/accounts/accounts-deposit/">How to deposit to a chain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/accounts/accounts-withdraw/">How to withdraw from a chain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/accounts/accounts-views/">View account balances</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/accounts/accounts-common-account/">The common account</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Interacting with smart contracts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/smartcontract-interaction/on-ledger/">On-ledger requests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/smartcontract-interaction/off-ledger/">Off-ledger requests</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Types of VMs/Languages</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/vm-types/iscp-vm/">How ISCP works as a language/VM agnostic platform</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Rust/Wasm based smart contracts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/vm-types/rust-wasm/">Why and what does it look like?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/vm-types/rust-wasm/">Solidity/EVM based smart contracts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Solidity/EVM based smart contracts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/vm-types/evm/">Why and what does it look like?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/core_concepts/vm-types/evm/">Solidity/EVM based smart contracts</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ISCP chains and nodes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/chains_and_nodes/setup/">Setting up a chain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/chains_and_nodes/run-node/">Running a node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/chains_and_nodes/manage/">Chain Management</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Rust/WASM</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/rust_wasm/readme/">Introduction</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">EVM</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide/evm/readme/">Introduction</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/contribute/">Contribute</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Old</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/welcome/">Welcome</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/readme/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/01/">The Solo Package</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/02/">Tokens and the UTXO Ledger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/03/">Creating a Chain; Core Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/04/">Deploying and Running a Rust Smart Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/05/">Structure of the Smart Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/06/">Sending a Request</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/07/">Calling a View</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/08/">Deposit and Withdraw Tokens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/09/">Sending Tokens to a Smart Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/10/">Return Of Tokens in Case of Failure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/11/">Sending Tokens from a Smart Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorial/12/">ISCP On-Chain Accounts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Core Contracts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract_core/overview/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract_core/root/">Root Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract_core/accounts/">Account Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract_core/blob/">Blob Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract_core/blocklog/">Blocklog Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract_core/governance/">Governance Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract_core/default/">Default Contract</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Miscellaneous</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/misc/runwasp/">Run a Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/misc/deploy/">Deploy with Wasp-CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/misc/install/">Install</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/misc/invoking/">Invoke</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/misc/utxo/">UTXO Ledger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/misc/coretypes/">Core Types</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/misc/accounts/">On-Chain Accounts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/misc/publisher/">Wasp Publisher</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">On-chain accounts</h1></header><p>ISCP introduces the concept of <em>on-chain account</em>. Each chain maintains a list
of pairs: <code>&lt;agent ID&gt;: &lt;colored balance&gt;</code>.  Each pair is an account with its
colored balances.</p><p><strong>Any agent ID on the ISCP network may have an account on any chain</strong>.  In
other words, any smart contract and any ordinary address on the network can
have account on any chain.</p><p>ISCP ensures that the tokens owned by the chain address may be moved to another
location only by the entity represented by the corresponding agent ID.  The
system requires cryptographically secure authorization to move funds between
on-chain accounts. </p><p>Note that there isn&#x27;t any &quot;superuser&quot; or any other centralized entity which could move
tokens from chain accounts without authorization of its owners.</p><p>Some corollaries:</p><ul><li>Any entity may move its tokens seamlessly from an address on the tangle to the account
controlled by the same address on any chain.</li><li>Anyone can send tokens to the account of any smart contract on any chain.</li><li>An address may, at any time, withdraw it tokens from the chain, transferring
them to the address on the Tangle.</li><li>A contract may keep its funds on its native chain or on any other chain.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-on-chain-accounts-work"></a>How on-chain accounts work<a class="hash-link" href="#how-on-chain-accounts-work" title="Direct link to heading">#</a></h2><p>Each chain contains several built-in smart contracts, called <em>core contracts</em>.
One of those <em>core</em> contracts is the <code>accounts</code> contract, which handles the whole
account machinery for each chain.</p><p>All funds belonging to the contracts on some chain are actually owned by the
chain address in the IOTA ledger (level 1).  The <code>accounts</code> contract keeps the
account balance for each agent ID in the chain state (level 2).</p><p>Funds are moved to and from any on-chain accounts by calling <code>accounts</code>
functions on that chain.  The <code>accounts</code> contract does all the ledger
accounting and guarantees security.</p><p>In each call, the <code>accounts</code> contract securely knows the agent ID of the
<em>caller</em> (either an ordinary wallet or another smart contract) and authorizes
the call.  For example, a call to the <code>withdraw</code> function will only be
authorized if called from the <em>agent ID</em> of the owner of the account.</p><p>The most important functions of the <code>accounts</code> contract are:</p><ul><li><code>deposit</code>. Allows the caller to deposit its own funds to any target account on the chain.</li><li><code>withdrawToAddress</code>. Allows a L1 address (a wallet) to take funds from its on-chain account back to the address. </li><li><code>withdrawToChain</code>. Allows a smart contract to take back its funds from another chain to its native chain. </li></ul><p>By sending requests to the <code>accounts</code> contract on a chain, the sender is in
full control of its on-chain funds. </p><p>The <code>Sandbox</code> interface provides <code>TransferToAddress</code> method for the smart contract
to transfer its funds to any address on the Tangle.</p><p>For more information see <a href="/docs/contract_core/accounts/">accounts contract</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-secure-are-the-on-chain-accounts"></a>How secure are the on-chain accounts?<a class="hash-link" href="#how-secure-are-the-on-chain-accounts" title="Direct link to heading">#</a></h2><p>On-chain accounts are as secure as the chain they reside on.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="node-fees"></a>Node fees<a class="hash-link" href="#node-fees" title="Direct link to heading">#</a></h2><p>The node fees are charged by using the following logic:</p><ul><li>if fees are enabled, they are accrued to the on-chain account of
<code>ChainOwnerID</code>, the <em>agent ID</em> that represents the owner of the chain.</li><li>if fees are disabled, the request tokens (1 mandatory token contained in each request)
are always accrued to the on-chain account controlled by the sender of the request.
The requester may withdraw it at any time.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/iotaledger/chronicle.rs/tree/main/docs/docs/misc/accounts.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/misc/coretypes/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Core types</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/misc/publisher/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Wasp Publisher Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-on-chain-accounts-work" class="table-of-contents__link">How on-chain accounts work</a></li><li><a href="#how-secure-are-the-on-chain-accounts" class="table-of-contents__link">How secure are the on-chain accounts?</a></li><li><a href="#node-fees" class="table-of-contents__link">Node fees</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/welcome/">Welcome</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 IOTA Foundation, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.44b953f2.js"></script>
<script src="/assets/js/main.ab889f2b.js"></script>
</body>
</html>