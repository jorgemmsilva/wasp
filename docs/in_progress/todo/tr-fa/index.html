<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons"><title data-react-helmet="true">tr-fa | IOTA Smart Contract Protocol</title><meta data-react-helmet="true" property="og:url" content="https://iscp.docs.iota.org/docs/in_progress/todo/tr-fa/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="tr-fa | IOTA Smart Contract Protocol"><meta data-react-helmet="true" name="description" content="Obsolete. To be adjusted to the new version"><meta data-react-helmet="true" property="og:description" content="Obsolete. To be adjusted to the new version"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://iscp.docs.iota.org/docs/in_progress/todo/tr-fa/"><link data-react-helmet="true" rel="alternate" href="https://iscp.docs.iota.org/docs/in_progress/todo/tr-fa/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://iscp.docs.iota.org/docs/in_progress/todo/tr-fa/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a6ec2731.css">
<link rel="preload" href="/assets/js/runtime~main.44958c8a.js" as="script">
<link rel="preload" href="/assets/js/main.d634752e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ISCP</b></a><a class="navbar__item navbar__link" href="/docs/welcome/">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ISCP</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/welcome/">Documentation</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">tr-fa</h1></header><p><em>Obsolete. To be adjusted to the new version</em></p><hr><header><h1 class="h1Heading_27L5">Handling tagged tokens with <em>TokenRegistry</em> and <em>FairAuction</em></h1></header><p>Tagged tokens, (a.k.a. colored tokens) is a powerful feature of the <a href="/docs/misc/utxo/">UTXO ledger</a>.
Two PoC smart contracts, <em>TokenRegistry</em> and <em>FairAuction</em> demonstrates how smart contract can manipulate them and
extend their functions. The demo dashboards can be found <a href="http://waspdev01.iota.cafe:10000" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tokenregistry"></a><em>TokenRegistry</em><a class="hash-link" href="#tokenregistry" title="Direct link to heading">#</a></h2><p>Any wallet can mint tagged tokens by creating transaction output with <code>new-color</code>. The <em>minting</em>
means &quot;tagging&quot; the iota tokens with color code, &quot;painting&quot; iota tokens.</p><p>The tagged tokens then can be moved around and sent to addresses just like any other token.
The tag of it, the <code>color</code>, is a 32 byte long code which doesn&#x27;t say much about the token.</p><p>The <em>TokenRegistry</em> is a simple smart contract which keeps a registry of tagged tokens with their metadata.
It also keeps cryptographical proof when, how many and which address minted the tagged tokens. </p><p>The program Go code with program hash <code>8h2RGcbsUgKckh9rZ4VUF75NUfxP4bj1FC66oSF9us6p</code> of the smart contract
can be found <a href="https://github.com/iotaledger/wasp" target="_blank" rel="noopener noreferrer">in repository TODO</a>.</p><p>The following command mints 3 tokens into the same address of the wallet.</p><p><code>wasp-cli fa mint &quot;My first 3 coins&quot; 3</code></p><p>With <code>fa</code> tag <code>wasp-cli</code> derives we are dealing with the <code>TokenRegistry</code>.
The  command creates a transaction which contains wor things in it:</p><ul><li>&quot;minting&quot; itself, assigning the new tag to 3 iotas asn sending them to the same address</li><li>the <code>mint</code> request to the <em>TokenRegistry</em>.</li></ul><p>It is an atomic operation: either both token minting and sending the request is successful, or none of it.</p><p>The program will output something like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">using Goshimmer host waspdev03.iota.cafe:8080</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Minted 3 tokens of color Fu5UEJ2SiJZdTUbS72NkQ9uyQPQtqMDJW4SodDdr5G1w into address WoCZCHKr1AsbDXXyPQn5JDs7jkbQ2LNDrADXGXTqB7pW.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Metadata of the supply: &#x27;test coin for an auction&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Metadata was sent to TokenRegistry SC at bX3H7Sfh8Ez3g5ygevbUnchTKm6NjTtD3MsHQKGuMTgC</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The minted tokens goes right into the same address which created the <code>mint</code> request.</p><p>The request itself is picked by the SC and result in record in the state of it. It contains:</p><ul><li>color of the minted tokens</li><li>minted supply, 3 in this case</li><li>address, the originator of the new supply</li><li>description text</li><li>any optional attached metadata</li></ul><p>The record cannot be faked, and it is immutable in the smart contract.
So, if a supply was minted with the <em>TokenRegistry</em>,
the metadata contained in it can be trusted by anyone, because it is a cryptographical proof it is correct.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fairauction"></a><em>FairAuction</em><a class="hash-link" href="#fairauction" title="Direct link to heading">#</a></h2><p>What can we do with tagged tokens? They actually can represent real world assets, like shares,
collectible tokens or any other use case. The powerful thing is those tokens can be moved around the ledger
between addresses using standard IOTA wallet: there&#x27;s no need for any smart contracts.</p><p>But if we want to sell it on the market, we have to entrust someone who is running that market and send it the
token(s) we want to sell. Example of would be an exchange.</p><p>Here we provide alternative: a simple demo smart contract <em>FairAuction</em> which implements a simple
distributed marketplace where you can sell and buy tagged tokens for iotas in an auction.</p><p>In order to sell one of 3 tokens we minted above we can use the following command:</p><p><code>wasp-cli fa start-auction &quot;my first auction&quot; Fu5UEJ2SiJZdTUbS72NkQ9uyQPQtqMDJW4SodDdr5G1w 1 100 60</code> </p><p>The command will send request to the smart contract instance and it will start auction for 1 token of
color <code>Fu5UEJ2SiJZdTUbS72NkQ9uyQPQtqMDJW4SodDdr5G1w</code> with minimum bid of 100 iotas and duration of 60 minutes.</p><p>With the <code>start-auction</code> request the tagged token will be sent to the smart contract address. </p><p>Smart contract starts an auction by self-posting <code>close-auction</code> request which is <strong>time-locked</strong> for the duration
of the auction, i.e. in the example above for 60 minutes.
The committee nodes will automatically run that request after 60 minutes as a result of consensus between nodes that
auction closing time is over.  </p><p>Next 60 minutes anyone can place bids in the auction with commands like this:</p><p><code>wasp-cli fa place-bid Fu5UEJ2SiJZdTUbS72NkQ9uyQPQtqMDJW4SodDdr5G1w 120</code></p><p>Upon expiration of the duration of the auction, the time-locked request will be unlocked and
auction will be closed by selecting first bidder with the highest bid as a winner.
It is all programmed in the <a href="https://github.com/iotaledger/wasp" target="_blank" rel="noopener noreferrer">code of the smart contract TODO</a>.</p><p>The smart contract will transfer tokens for sale to the winner and will return all placed sums to non-winning bidders.
It is all codded in the smart contract and it can&#x27;t be overriden by any parties which do not have quorum.
Hence <em>FairAuction</em>.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/iotaledger/chronicle.rs/tree/main/docs/docs/in_progress/todo/tr-fa.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tokenregistry" class="table-of-contents__link"><em>TokenRegistry</em></a></li><li><a href="#fairauction" class="table-of-contents__link"><em>FairAuction</em></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/welcome/">Welcome</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 IOTA Foundation, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.44958c8a.js"></script>
<script src="/assets/js/main.d634752e.js"></script>
</body>
</html>